{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tlind\\\\OneDrive\\\\Desktop\\\\cfb-analytics\\\\src\\\\Components\\\\CommunityChat.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport './CommunityChat.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CommunityChat = ({\n  user\n}) => {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedRoom, setSelectedRoom] = useState('general');\n  const [loading, setLoading] = useState(false);\n  const [moderationResult, setModerationResult] = useState(null);\n  const [onlineUsers, setOnlineUsers] = useState([]);\n  const [messageFilter, setMessageFilter] = useState('all'); // all, my-team, predictions\n  const messagesEndRef = useRef(null);\n\n  // OpenAI Moderation API configuration\n  const OPENAI_API_KEY = process.env.REACT_APP_OPENAI_API_KEY;\n  const MODERATION_API_URL = 'https://api.openai.com/v1/moderations';\n  const CHAT_API_URL = process.env.REACT_APP_CHAT_API_URL || '/api/chat';\n\n  // Chat rooms configuration\n  const chatRooms = {\n    general: {\n      name: 'General Discussion',\n      emoji: 'üí¨',\n      description: 'Talk about college sports'\n    },\n    predictions: {\n      name: 'Predictions & Bets',\n      emoji: 'üéØ',\n      description: 'Share your predictions'\n    },\n    'sec': {\n      name: 'SEC Talk',\n      emoji: 'üèà',\n      description: 'SEC teams discussion'\n    },\n    'big-ten': {\n      name: 'Big Ten Talk',\n      emoji: 'üåü',\n      description: 'Big Ten teams discussion'\n    },\n    'big-12': {\n      name: 'Big 12 Talk',\n      emoji: '‚ö°',\n      description: 'Big 12 teams discussion'\n    },\n    'acc': {\n      name: 'ACC Talk',\n      emoji: 'üî•',\n      description: 'ACC teams discussion'\n    },\n    'basketball': {\n      name: 'Basketball Talk',\n      emoji: 'üèÄ',\n      description: 'College basketball discussion'\n    },\n    'trash-talk': {\n      name: 'Trash Talk Zone',\n      emoji: 'üò§',\n      description: 'Friendly team rivalry (moderated)'\n    }\n  };\n\n  // Scroll to bottom when new messages arrive\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  // Load messages when room changes\n  useEffect(() => {\n    if (user) {\n      loadMessages();\n      joinRoom();\n    }\n  }, [selectedRoom, user]);\n  const scrollToBottom = () => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: 'smooth'\n    });\n  };\n\n  // AI Content Moderation using OpenAI\n  const moderateMessage = async message => {\n    try {\n      const response = await fetch(MODERATION_API_URL, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${OPENAI_API_KEY}`\n        },\n        body: JSON.stringify({\n          input: message\n        })\n      });\n      if (!response.ok) {\n        throw new Error('Moderation API error');\n      }\n      const data = await response.json();\n      const result = data.results[0];\n\n      // Custom moderation logic for sports trash talk\n      const isAllowedTrashTalk = await checkSportsTrashTalk(message);\n      return {\n        flagged: result.flagged && !isAllowedTrashTalk,\n        categories: result.categories,\n        category_scores: result.category_scores,\n        isTrashTalk: isAllowedTrashTalk,\n        message: message\n      };\n    } catch (error) {\n      console.error('Moderation error:', error);\n      // Fallback moderation\n      return await fallbackModeration(message);\n    }\n  };\n\n  // Custom sports trash talk checker\n  const checkSportsTrashTalk = async message => {\n    const sportsTrashTalkPrompt = `\n    Analyze this message to determine if it's acceptable sports trash talk or crosses the line:\n\n    Message: \"${message}\"\n\n    Acceptable sports trash talk includes:\n    - Boasting about your team's performance\n    - Playful rivalry between teams\n    - Predictions about game outcomes\n    - Team comparisons and statistics\n    - Celebrating wins or mourning losses\n    - Friendly competitive banter\n\n    NOT acceptable:\n    - Personal attacks on individuals\n    - Profanity or vulgar language\n    - Threats of violence\n    - Discriminatory language\n    - Harassment\n    - Off-topic content\n\n    Respond with only \"ALLOWED\" or \"BLOCKED\" and a brief reason.\n    `;\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${OPENAI_API_KEY}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-3.5-turbo',\n          messages: [{\n            role: 'system',\n            content: 'You are a sports chat moderator. Your job is to allow friendly team rivalry and trash talk while blocking inappropriate content.'\n          }, {\n            role: 'user',\n            content: sportsTrashTalkPrompt\n          }],\n          max_tokens: 100,\n          temperature: 0.3\n        })\n      });\n      if (!response.ok) {\n        return false;\n      }\n      const data = await response.json();\n      const result = data.choices[0].message.content.toLowerCase();\n      return result.includes('allowed');\n    } catch (error) {\n      console.error('Sports moderation error:', error);\n      return false;\n    }\n  };\n\n  // Fallback moderation without API\n  const fallbackModeration = async message => {\n    const profanityList = ['damn', 'hell', 'crap']; // Add your list\n    const threatWords = ['kill', 'die', 'hurt', 'violence'];\n    const personalAttacks = ['idiot', 'stupid', 'moron'];\n    const lowerMessage = message.toLowerCase();\n    const hasProfanity = profanityList.some(word => lowerMessage.includes(word));\n    const hasThreats = threatWords.some(word => lowerMessage.includes(word));\n    const hasPersonalAttacks = personalAttacks.some(word => lowerMessage.includes(word));\n    return {\n      flagged: hasThreats || hasPersonalAttacks,\n      categories: {\n        hate: hasPersonalAttacks,\n        harassment: hasThreats,\n        violence: hasThreats\n      },\n      isTrashTalk: !hasThreats && !hasPersonalAttacks,\n      message: message,\n      fallback: true\n    };\n  };\n\n  // Send message with moderation\n  const sendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim() || !user) return;\n    setLoading(true);\n    try {\n      // Moderate the message first\n      const moderation = await moderateMessage(newMessage.trim());\n      setModerationResult(moderation);\n      if (moderation.flagged) {\n        alert('Your message was blocked by our AI moderator. Please keep the conversation respectful and focused on sports.');\n        setLoading(false);\n        return;\n      }\n\n      // Send message to your real chat API\n      const messageData = {\n        id: Date.now(),\n        user: {\n          id: user.id,\n          name: user.name || user.email.split('@')[0],\n          avatar: user.avatar || `https://ui-avatars.com/api/?name=${user.name}&background=2d5016&color=fff`,\n          favoriteTeam: user.favoriteTeam || 'College Sports Fan'\n        },\n        message: newMessage.trim(),\n        room: selectedRoom,\n        timestamp: new Date().toISOString(),\n        moderation: {\n          checked: true,\n          isTrashTalk: moderation.isTrashTalk,\n          safe: true\n        }\n      };\n\n      // Send to your backend\n      await fetch(`${CHAT_API_URL}/messages`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          'Authorization': `Bearer ${user.token}`\n        },\n        body: JSON.stringify(messageData)\n      });\n\n      // Add to local state immediately for responsiveness\n      setMessages(prev => [...prev, messageData]);\n      setNewMessage('');\n    } catch (error) {\n      console.error('Error sending message:', error);\n      alert('Failed to send message. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Load messages from your backend\n  const loadMessages = async () => {\n    try {\n      const response = await fetch(`${CHAT_API_URL}/messages/${selectedRoom}?limit=50`, {\n        headers: {\n          'Authorization': user ? `Bearer ${user.token}` : ''\n        }\n      });\n      if (!response.ok) {\n        throw new Error('Failed to load messages');\n      }\n      const data = await response.json();\n      setMessages(data.messages || []);\n    } catch (error) {\n      console.error('Error loading messages:', error);\n      // Show demo messages if API not connected\n      loadDemoMessages();\n    }\n  };\n\n  // Demo messages for development\n  const loadDemoMessages = () => {\n    const demoMessages = [{\n      id: 1,\n      user: {\n        name: 'AlabameFan22',\n        favoriteTeam: 'Alabama',\n        avatar: 'https://ui-avatars.com/api/?name=AF&background=crimson&color=fff'\n      },\n      message: 'Roll Tide! Alabama is going all the way this season! üèà',\n      timestamp: new Date(Date.now() - 1000 * 60 * 10).toISOString(),\n      room: selectedRoom\n    }, {\n      id: 2,\n      user: {\n        name: 'GeorgiaDawg',\n        favoriteTeam: 'Georgia',\n        avatar: 'https://ui-avatars.com/api/?name=GD&background=red&color=fff'\n      },\n      message: 'Georgia defense is going to shut down Alabama this year. Go Dawgs! üêï',\n      timestamp: new Date(Date.now() - 1000 * 60 * 8).toISOString(),\n      room: selectedRoom\n    }, {\n      id: 3,\n      user: {\n        name: 'TexasLonghorn',\n        favoriteTeam: 'Texas',\n        avatar: 'https://ui-avatars.com/api/?name=TL&background=orange&color=fff'\n      },\n      message: 'Hook em Horns! Texas is back and ready to dominate the SEC! ü§ò',\n      timestamp: new Date(Date.now() - 1000 * 60 * 5).toISOString(),\n      room: selectedRoom\n    }];\n    setMessages(demoMessages);\n  };\n\n  // Join room (for real-time updates)\n  const joinRoom = () => {\n    // Here you would implement WebSocket connection for real-time chat\n    // For now, we'll simulate with polling\n    if (user) {\n      setOnlineUsers(['AlabameFan22', 'GeorgiaDawg', 'TexasLonghorn', user.name]);\n    }\n  };\n\n  // Format timestamp\n  const formatTime = timestamp => {\n    const date = new Date(timestamp);\n    const now = new Date();\n    const diff = now - date;\n    if (diff < 1000 * 60) return 'Just now';\n    if (diff < 1000 * 60 * 60) return `${Math.floor(diff / (1000 * 60))}m ago`;\n    if (diff < 1000 * 60 * 60 * 24) return `${Math.floor(diff / (1000 * 60 * 60))}h ago`;\n    return date.toLocaleDateString();\n  };\n\n  // Filter messages\n  const filteredMessages = messages.filter(msg => {\n    if (messageFilter === 'all') return true;\n    if (messageFilter === 'my-team' && user) {\n      return msg.user.favoriteTeam === user.favoriteTeam;\n    }\n    if (messageFilter === 'predictions') {\n      return msg.message.toLowerCase().includes('predict') || msg.message.toLowerCase().includes('bet');\n    }\n    return true;\n  });\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"community-chat\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"auth-required\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\uD83D\\uDD12 Join the Community\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 321,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Sign in to participate in community discussions with college sports fans!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"preview-messages\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"Preview of Community Chat:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"demo-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"AlabameFan22:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 15\n            }, this), \" Roll Tide! Alabama is going all the way! \\uD83C\\uDFC8\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"demo-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"GeorgiaDawg:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 329,\n              columnNumber: 15\n            }, this), \" Georgia defense will shut them down! Go Dawgs! \\uD83D\\uDC15\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"demo-message\",\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"TexasLonghorn:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 15\n            }, this), \" Texas is back and ready to dominate! \\uD83E\\uDD18\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"join-community-btn\",\n          children: \"Sign In to Join Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 320,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"community-chat\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"\\uD83D\\uDCAC Community Chat\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Connect with college sports fans \\u2022 AI-moderated for respectful discussion\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"room-selector\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Chat Room:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 350,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedRoom,\n            onChange: e => setSelectedRoom(e.target.value),\n            children: Object.entries(chatRooms).map(([key, room]) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: key,\n              children: [room.emoji, \" \", room.name]\n            }, key, true, {\n              fileName: _jsxFileName,\n              lineNumber: 353,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 349,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"message-filter\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Show:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 361,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n            value: messageFilter,\n            onChange: e => setMessageFilter(e.target.value),\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"all\",\n              children: \"All Messages\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"my-team\",\n              children: \"My Team Fans\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"predictions\",\n              children: \"Predictions Only\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 365,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 360,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"online-users\",\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          children: [\"Online (\", onlineUsers.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 371,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"users-list\",\n          children: [onlineUsers.slice(0, 5).map((username, index) => /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"online-user\",\n            children: username\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 15\n          }, this)), onlineUsers.length > 5 && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"more-users\",\n            children: [\"+\", onlineUsers.length - 5, \" more\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 376,\n            columnNumber: 40\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 370,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 344,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"room-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"room-details\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"room-emoji\",\n          children: chatRooms[selectedRoom].emoji\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: chatRooms[selectedRoom].name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 386,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: chatRooms[selectedRoom].description\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 387,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 383,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"moderation-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"ai-badge\",\n          children: \"\\uD83E\\uDD16 AI Moderated\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Trash talk welcome \\u2022 Personal attacks blocked\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"messages-container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"messages-list\",\n        children: [filteredMessages.map(msg => {\n          var _msg$moderation;\n          return /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"message\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-avatar\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: msg.user.avatar,\n                alt: msg.user.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 402,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"team-badge\",\n                children: msg.user.favoriteTeam\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 401,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"message-content\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-header\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"username\",\n                  children: msg.user.name\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 407,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"timestamp\",\n                  children: formatTime(msg.timestamp)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 408,\n                  columnNumber: 19\n                }, this), ((_msg$moderation = msg.moderation) === null || _msg$moderation === void 0 ? void 0 : _msg$moderation.isTrashTalk) && /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"trash-talk-badge\",\n                  children: \"\\uD83D\\uDD25 Trash Talk\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 410,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 406,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"message-text\",\n                children: msg.message\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 405,\n              columnNumber: 15\n            }, this)]\n          }, msg.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 400,\n            columnNumber: 13\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 417,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: sendMessage,\n      className: \"message-input-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: newMessage,\n          onChange: e => setNewMessage(e.target.value),\n          placeholder: `Share your thoughts about ${chatRooms[selectedRoom].name.toLowerCase()}...`,\n          disabled: loading,\n          maxLength: 500\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          disabled: loading || !newMessage.trim(),\n          children: loading ? 'ü§ñ' : 'üì§'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 432,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 423,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"input-info\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"char-count\",\n          children: [newMessage.length, \"/500\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 437,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"moderation-note\",\n          children: \"AI monitors for respectful discussion \\u2022 Friendly rivalry encouraged \\uD83C\\uDFC8\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 422,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-guidelines\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\uD83D\\uDCA1 Chat Guidelines\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 446,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"guidelines-grid\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"guideline allowed\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"icon\",\n            children: \"\\u2705\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 449,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Allowed:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 451,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Team boasting, rivalry banter, game predictions, stats discussion\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 452,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 450,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 448,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"guideline blocked\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"icon\",\n            children: \"\\u274C\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 456,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n              children: \"Blocked:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 458,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Personal attacks, profanity, threats, harassment, off-topic content\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 457,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 447,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 445,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"moderation-status\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"\\uD83E\\uDD16 AI Moderation Active\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 467,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Our AI system reviews all messages to maintain a respectful environment while allowing passionate sports discussion.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 9\n      }, this), moderationResult && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"last-moderation\",\n        children: [\"Last check: \", moderationResult.isTrashTalk ? 'üî• Trash talk approved' : '‚úÖ Message approved']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 470,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 342,\n    columnNumber: 5\n  }, this);\n};\n_s(CommunityChat, \"1DjccWfqHcH9Xsl/E2SbtgFGeoE=\");\n_c = CommunityChat;\nexport default CommunityChat;\nvar _c;\n$RefreshReg$(_c, \"CommunityChat\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","CommunityChat","user","_s","messages","setMessages","newMessage","setNewMessage","selectedRoom","setSelectedRoom","loading","setLoading","moderationResult","setModerationResult","onlineUsers","setOnlineUsers","messageFilter","setMessageFilter","messagesEndRef","OPENAI_API_KEY","process","env","REACT_APP_OPENAI_API_KEY","MODERATION_API_URL","CHAT_API_URL","REACT_APP_CHAT_API_URL","chatRooms","general","name","emoji","description","predictions","scrollToBottom","loadMessages","joinRoom","_messagesEndRef$curre","current","scrollIntoView","behavior","moderateMessage","message","response","fetch","method","headers","body","JSON","stringify","input","ok","Error","data","json","result","results","isAllowedTrashTalk","checkSportsTrashTalk","flagged","categories","category_scores","isTrashTalk","error","console","fallbackModeration","sportsTrashTalkPrompt","model","role","content","max_tokens","temperature","choices","toLowerCase","includes","profanityList","threatWords","personalAttacks","lowerMessage","hasProfanity","some","word","hasThreats","hasPersonalAttacks","hate","harassment","violence","fallback","sendMessage","e","preventDefault","trim","moderation","alert","messageData","id","Date","now","email","split","avatar","favoriteTeam","room","timestamp","toISOString","checked","safe","token","prev","loadDemoMessages","demoMessages","formatTime","date","diff","Math","floor","toLocaleDateString","filteredMessages","filter","msg","className","children","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","target","Object","entries","map","key","length","slice","username","index","_msg$moderation","src","alt","ref","onSubmit","type","placeholder","disabled","maxLength","_c","$RefreshReg$"],"sources":["C:/Users/tlind/OneDrive/Desktop/cfb-analytics/src/Components/CommunityChat.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport './CommunityChat.css';\r\n\r\nconst CommunityChat = ({ user }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [newMessage, setNewMessage] = useState('');\r\n  const [selectedRoom, setSelectedRoom] = useState('general');\r\n  const [loading, setLoading] = useState(false);\r\n  const [moderationResult, setModerationResult] = useState(null);\r\n  const [onlineUsers, setOnlineUsers] = useState([]);\r\n  const [messageFilter, setMessageFilter] = useState('all'); // all, my-team, predictions\r\n  const messagesEndRef = useRef(null);\r\n\r\n  // OpenAI Moderation API configuration\r\n  const OPENAI_API_KEY = process.env.REACT_APP_OPENAI_API_KEY;\r\n  const MODERATION_API_URL = 'https://api.openai.com/v1/moderations';\r\n  const CHAT_API_URL = process.env.REACT_APP_CHAT_API_URL || '/api/chat';\r\n\r\n  // Chat rooms configuration\r\n  const chatRooms = {\r\n    general: { name: 'General Discussion', emoji: 'üí¨', description: 'Talk about college sports' },\r\n    predictions: { name: 'Predictions & Bets', emoji: 'üéØ', description: 'Share your predictions' },\r\n    'sec': { name: 'SEC Talk', emoji: 'üèà', description: 'SEC teams discussion' },\r\n    'big-ten': { name: 'Big Ten Talk', emoji: 'üåü', description: 'Big Ten teams discussion' },\r\n    'big-12': { name: 'Big 12 Talk', emoji: '‚ö°', description: 'Big 12 teams discussion' },\r\n    'acc': { name: 'ACC Talk', emoji: 'üî•', description: 'ACC teams discussion' },\r\n    'basketball': { name: 'Basketball Talk', emoji: 'üèÄ', description: 'College basketball discussion' },\r\n    'trash-talk': { name: 'Trash Talk Zone', emoji: 'üò§', description: 'Friendly team rivalry (moderated)' }\r\n  };\r\n\r\n  // Scroll to bottom when new messages arrive\r\n  useEffect(() => {\r\n    scrollToBottom();\r\n  }, [messages]);\r\n\r\n  // Load messages when room changes\r\n  useEffect(() => {\r\n    if (user) {\r\n      loadMessages();\r\n      joinRoom();\r\n    }\r\n  }, [selectedRoom, user]);\r\n\r\n  const scrollToBottom = () => {\r\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\r\n  };\r\n\r\n  // AI Content Moderation using OpenAI\r\n  const moderateMessage = async (message) => {\r\n    try {\r\n      const response = await fetch(MODERATION_API_URL, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${OPENAI_API_KEY}`\r\n        },\r\n        body: JSON.stringify({\r\n          input: message\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Moderation API error');\r\n      }\r\n\r\n      const data = await response.json();\r\n      const result = data.results[0];\r\n\r\n      // Custom moderation logic for sports trash talk\r\n      const isAllowedTrashTalk = await checkSportsTrashTalk(message);\r\n      \r\n      return {\r\n        flagged: result.flagged && !isAllowedTrashTalk,\r\n        categories: result.categories,\r\n        category_scores: result.category_scores,\r\n        isTrashTalk: isAllowedTrashTalk,\r\n        message: message\r\n      };\r\n    } catch (error) {\r\n      console.error('Moderation error:', error);\r\n      // Fallback moderation\r\n      return await fallbackModeration(message);\r\n    }\r\n  };\r\n\r\n  // Custom sports trash talk checker\r\n  const checkSportsTrashTalk = async (message) => {\r\n    const sportsTrashTalkPrompt = `\r\n    Analyze this message to determine if it's acceptable sports trash talk or crosses the line:\r\n\r\n    Message: \"${message}\"\r\n\r\n    Acceptable sports trash talk includes:\r\n    - Boasting about your team's performance\r\n    - Playful rivalry between teams\r\n    - Predictions about game outcomes\r\n    - Team comparisons and statistics\r\n    - Celebrating wins or mourning losses\r\n    - Friendly competitive banter\r\n\r\n    NOT acceptable:\r\n    - Personal attacks on individuals\r\n    - Profanity or vulgar language\r\n    - Threats of violence\r\n    - Discriminatory language\r\n    - Harassment\r\n    - Off-topic content\r\n\r\n    Respond with only \"ALLOWED\" or \"BLOCKED\" and a brief reason.\r\n    `;\r\n\r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${OPENAI_API_KEY}`\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'gpt-3.5-turbo',\r\n          messages: [\r\n            {\r\n              role: 'system',\r\n              content: 'You are a sports chat moderator. Your job is to allow friendly team rivalry and trash talk while blocking inappropriate content.'\r\n            },\r\n            {\r\n              role: 'user',\r\n              content: sportsTrashTalkPrompt\r\n            }\r\n          ],\r\n          max_tokens: 100,\r\n          temperature: 0.3\r\n        })\r\n      });\r\n\r\n      if (!response.ok) {\r\n        return false;\r\n      }\r\n\r\n      const data = await response.json();\r\n      const result = data.choices[0].message.content.toLowerCase();\r\n      \r\n      return result.includes('allowed');\r\n    } catch (error) {\r\n      console.error('Sports moderation error:', error);\r\n      return false;\r\n    }\r\n  };\r\n\r\n  // Fallback moderation without API\r\n  const fallbackModeration = async (message) => {\r\n    const profanityList = ['damn', 'hell', 'crap']; // Add your list\r\n    const threatWords = ['kill', 'die', 'hurt', 'violence'];\r\n    const personalAttacks = ['idiot', 'stupid', 'moron'];\r\n\r\n    const lowerMessage = message.toLowerCase();\r\n    \r\n    const hasProfanity = profanityList.some(word => lowerMessage.includes(word));\r\n    const hasThreats = threatWords.some(word => lowerMessage.includes(word));\r\n    const hasPersonalAttacks = personalAttacks.some(word => lowerMessage.includes(word));\r\n\r\n    return {\r\n      flagged: hasThreats || hasPersonalAttacks,\r\n      categories: {\r\n        hate: hasPersonalAttacks,\r\n        harassment: hasThreats,\r\n        violence: hasThreats\r\n      },\r\n      isTrashTalk: !hasThreats && !hasPersonalAttacks,\r\n      message: message,\r\n      fallback: true\r\n    };\r\n  };\r\n\r\n  // Send message with moderation\r\n  const sendMessage = async (e) => {\r\n    e.preventDefault();\r\n    if (!newMessage.trim() || !user) return;\r\n\r\n    setLoading(true);\r\n    \r\n    try {\r\n      // Moderate the message first\r\n      const moderation = await moderateMessage(newMessage.trim());\r\n      setModerationResult(moderation);\r\n\r\n      if (moderation.flagged) {\r\n        alert('Your message was blocked by our AI moderator. Please keep the conversation respectful and focused on sports.');\r\n        setLoading(false);\r\n        return;\r\n      }\r\n\r\n      // Send message to your real chat API\r\n      const messageData = {\r\n        id: Date.now(),\r\n        user: {\r\n          id: user.id,\r\n          name: user.name || user.email.split('@')[0],\r\n          avatar: user.avatar || `https://ui-avatars.com/api/?name=${user.name}&background=2d5016&color=fff`,\r\n          favoriteTeam: user.favoriteTeam || 'College Sports Fan'\r\n        },\r\n        message: newMessage.trim(),\r\n        room: selectedRoom,\r\n        timestamp: new Date().toISOString(),\r\n        moderation: {\r\n          checked: true,\r\n          isTrashTalk: moderation.isTrashTalk,\r\n          safe: true\r\n        }\r\n      };\r\n\r\n      // Send to your backend\r\n      await fetch(`${CHAT_API_URL}/messages`, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          'Authorization': `Bearer ${user.token}`\r\n        },\r\n        body: JSON.stringify(messageData)\r\n      });\r\n\r\n      // Add to local state immediately for responsiveness\r\n      setMessages(prev => [...prev, messageData]);\r\n      setNewMessage('');\r\n      \r\n    } catch (error) {\r\n      console.error('Error sending message:', error);\r\n      alert('Failed to send message. Please try again.');\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Load messages from your backend\r\n  const loadMessages = async () => {\r\n    try {\r\n      const response = await fetch(`${CHAT_API_URL}/messages/${selectedRoom}?limit=50`, {\r\n        headers: {\r\n          'Authorization': user ? `Bearer ${user.token}` : ''\r\n        }\r\n      });\r\n\r\n      if (!response.ok) {\r\n        throw new Error('Failed to load messages');\r\n      }\r\n\r\n      const data = await response.json();\r\n      setMessages(data.messages || []);\r\n    } catch (error) {\r\n      console.error('Error loading messages:', error);\r\n      // Show demo messages if API not connected\r\n      loadDemoMessages();\r\n    }\r\n  };\r\n\r\n  // Demo messages for development\r\n  const loadDemoMessages = () => {\r\n    const demoMessages = [\r\n      {\r\n        id: 1,\r\n        user: { name: 'AlabameFan22', favoriteTeam: 'Alabama', avatar: 'https://ui-avatars.com/api/?name=AF&background=crimson&color=fff' },\r\n        message: 'Roll Tide! Alabama is going all the way this season! üèà',\r\n        timestamp: new Date(Date.now() - 1000 * 60 * 10).toISOString(),\r\n        room: selectedRoom\r\n      },\r\n      {\r\n        id: 2,\r\n        user: { name: 'GeorgiaDawg', favoriteTeam: 'Georgia', avatar: 'https://ui-avatars.com/api/?name=GD&background=red&color=fff' },\r\n        message: 'Georgia defense is going to shut down Alabama this year. Go Dawgs! üêï',\r\n        timestamp: new Date(Date.now() - 1000 * 60 * 8).toISOString(),\r\n        room: selectedRoom\r\n      },\r\n      {\r\n        id: 3,\r\n        user: { name: 'TexasLonghorn', favoriteTeam: 'Texas', avatar: 'https://ui-avatars.com/api/?name=TL&background=orange&color=fff' },\r\n        message: 'Hook em Horns! Texas is back and ready to dominate the SEC! ü§ò',\r\n        timestamp: new Date(Date.now() - 1000 * 60 * 5).toISOString(),\r\n        room: selectedRoom\r\n      }\r\n    ];\r\n    setMessages(demoMessages);\r\n  };\r\n\r\n  // Join room (for real-time updates)\r\n  const joinRoom = () => {\r\n    // Here you would implement WebSocket connection for real-time chat\r\n    // For now, we'll simulate with polling\r\n    if (user) {\r\n      setOnlineUsers(['AlabameFan22', 'GeorgiaDawg', 'TexasLonghorn', user.name]);\r\n    }\r\n  };\r\n\r\n  // Format timestamp\r\n  const formatTime = (timestamp) => {\r\n    const date = new Date(timestamp);\r\n    const now = new Date();\r\n    const diff = now - date;\r\n    \r\n    if (diff < 1000 * 60) return 'Just now';\r\n    if (diff < 1000 * 60 * 60) return `${Math.floor(diff / (1000 * 60))}m ago`;\r\n    if (diff < 1000 * 60 * 60 * 24) return `${Math.floor(diff / (1000 * 60 * 60))}h ago`;\r\n    return date.toLocaleDateString();\r\n  };\r\n\r\n  // Filter messages\r\n  const filteredMessages = messages.filter(msg => {\r\n    if (messageFilter === 'all') return true;\r\n    if (messageFilter === 'my-team' && user) {\r\n      return msg.user.favoriteTeam === user.favoriteTeam;\r\n    }\r\n    if (messageFilter === 'predictions') {\r\n      return msg.message.toLowerCase().includes('predict') || msg.message.toLowerCase().includes('bet');\r\n    }\r\n    return true;\r\n  });\r\n\r\n  if (!user) {\r\n    return (\r\n      <div className=\"community-chat\">\r\n        <div className=\"auth-required\">\r\n          <h2>üîí Join the Community</h2>\r\n          <p>Sign in to participate in community discussions with college sports fans!</p>\r\n          <div className=\"preview-messages\">\r\n            <h3>Preview of Community Chat:</h3>\r\n            <div className=\"demo-message\">\r\n              <strong>AlabameFan22:</strong> Roll Tide! Alabama is going all the way! üèà\r\n            </div>\r\n            <div className=\"demo-message\">\r\n              <strong>GeorgiaDawg:</strong> Georgia defense will shut them down! Go Dawgs! üêï\r\n            </div>\r\n            <div className=\"demo-message\">\r\n              <strong>TexasLonghorn:</strong> Texas is back and ready to dominate! ü§ò\r\n            </div>\r\n          </div>\r\n          <button className=\"join-community-btn\">Sign In to Join Chat</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"community-chat\">\r\n      {/* Chat Header */}\r\n      <div className=\"chat-header\">\r\n        <div className=\"header-content\">\r\n          <h1>üí¨ Community Chat</h1>\r\n          <p>Connect with college sports fans ‚Ä¢ AI-moderated for respectful discussion</p>\r\n          \r\n          <div className=\"room-selector\">\r\n            <label>Chat Room:</label>\r\n            <select value={selectedRoom} onChange={(e) => setSelectedRoom(e.target.value)}>\r\n              {Object.entries(chatRooms).map(([key, room]) => (\r\n                <option key={key} value={key}>\r\n                  {room.emoji} {room.name}\r\n                </option>\r\n              ))}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"message-filter\">\r\n            <label>Show:</label>\r\n            <select value={messageFilter} onChange={(e) => setMessageFilter(e.target.value)}>\r\n              <option value=\"all\">All Messages</option>\r\n              <option value=\"my-team\">My Team Fans</option>\r\n              <option value=\"predictions\">Predictions Only</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"online-users\">\r\n          <h4>Online ({onlineUsers.length})</h4>\r\n          <div className=\"users-list\">\r\n            {onlineUsers.slice(0, 5).map((username, index) => (\r\n              <span key={index} className=\"online-user\">{username}</span>\r\n            ))}\r\n            {onlineUsers.length > 5 && <span className=\"more-users\">+{onlineUsers.length - 5} more</span>}\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Room Info */}\r\n      <div className=\"room-info\">\r\n        <div className=\"room-details\">\r\n          <span className=\"room-emoji\">{chatRooms[selectedRoom].emoji}</span>\r\n          <div>\r\n            <h3>{chatRooms[selectedRoom].name}</h3>\r\n            <p>{chatRooms[selectedRoom].description}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"moderation-info\">\r\n          <span className=\"ai-badge\">ü§ñ AI Moderated</span>\r\n          <p>Trash talk welcome ‚Ä¢ Personal attacks blocked</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Messages Container */}\r\n      <div className=\"messages-container\">\r\n        <div className=\"messages-list\">\r\n          {filteredMessages.map((msg) => (\r\n            <div key={msg.id} className=\"message\">\r\n              <div className=\"message-avatar\">\r\n                <img src={msg.user.avatar} alt={msg.user.name} />\r\n                <span className=\"team-badge\">{msg.user.favoriteTeam}</span>\r\n              </div>\r\n              <div className=\"message-content\">\r\n                <div className=\"message-header\">\r\n                  <span className=\"username\">{msg.user.name}</span>\r\n                  <span className=\"timestamp\">{formatTime(msg.timestamp)}</span>\r\n                  {msg.moderation?.isTrashTalk && (\r\n                    <span className=\"trash-talk-badge\">üî• Trash Talk</span>\r\n                  )}\r\n                </div>\r\n                <div className=\"message-text\">{msg.message}</div>\r\n              </div>\r\n            </div>\r\n          ))}\r\n          <div ref={messagesEndRef} />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Message Input */}\r\n      <form onSubmit={sendMessage} className=\"message-input-form\">\r\n        <div className=\"input-container\">\r\n          <input\r\n            type=\"text\"\r\n            value={newMessage}\r\n            onChange={(e) => setNewMessage(e.target.value)}\r\n            placeholder={`Share your thoughts about ${chatRooms[selectedRoom].name.toLowerCase()}...`}\r\n            disabled={loading}\r\n            maxLength={500}\r\n          />\r\n          <button type=\"submit\" disabled={loading || !newMessage.trim()}>\r\n            {loading ? 'ü§ñ' : 'üì§'}\r\n          </button>\r\n        </div>\r\n        <div className=\"input-info\">\r\n          <span className=\"char-count\">{newMessage.length}/500</span>\r\n          <span className=\"moderation-note\">\r\n            AI monitors for respectful discussion ‚Ä¢ Friendly rivalry encouraged üèà\r\n          </span>\r\n        </div>\r\n      </form>\r\n\r\n      {/* Chat Guidelines */}\r\n      <div className=\"chat-guidelines\">\r\n        <h4>üí° Chat Guidelines</h4>\r\n        <div className=\"guidelines-grid\">\r\n          <div className=\"guideline allowed\">\r\n            <span className=\"icon\">‚úÖ</span>\r\n            <div>\r\n              <strong>Allowed:</strong>\r\n              <p>Team boasting, rivalry banter, game predictions, stats discussion</p>\r\n            </div>\r\n          </div>\r\n          <div className=\"guideline blocked\">\r\n            <span className=\"icon\">‚ùå</span>\r\n            <div>\r\n              <strong>Blocked:</strong>\r\n              <p>Personal attacks, profanity, threats, harassment, off-topic content</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* AI Moderation Status */}\r\n      <div className=\"moderation-status\">\r\n        <h4>ü§ñ AI Moderation Active</h4>\r\n        <p>Our AI system reviews all messages to maintain a respectful environment while allowing passionate sports discussion.</p>\r\n        {moderationResult && (\r\n          <div className=\"last-moderation\">\r\n            Last check: {moderationResult.isTrashTalk ? 'üî• Trash talk approved' : '‚úÖ Message approved'}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CommunityChat;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}